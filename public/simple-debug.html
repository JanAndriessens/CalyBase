<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Debug - CalyBase</title>
    <style>
        body { 
            font-family: monospace; 
            font-size: 16px; 
            background: black; 
            color: lime; 
            padding: 20px;
            margin: 0;
        }
        .big-button { 
            background: blue; 
            color: white; 
            border: none; 
            padding: 20px 30px; 
            font-size: 20px; 
            margin: 10px; 
            border-radius: 10px;
            display: block;
            width: 80%;
        }
        .logs { 
            border: 1px solid green; 
            padding: 10px; 
            margin: 10px 0; 
            background: #001100;
            max-height: 300px;
            overflow-y: scroll;
        }
    </style>
</head>
<body>
    <h1>üì± Simple iPad Debug</h1>
    
    <button class="big-button" onclick="startTest()">START DEBUG TEST</button>
    <button class="big-button" onclick="copyLogs()">COPY ALL LOGS</button>
    <button class="big-button" onclick="clearLogs()">CLEAR LOGS</button>
    
    <div class="logs" id="logArea">
        <div>Waiting for test...</div>
    </div>

    <script>
        let allMessages = [];
        
        function log(msg) {
            const time = new Date().toLocaleTimeString();
            const fullMsg = `[${time}] ${msg}`;
            allMessages.push(fullMsg);
            
            const logArea = document.getElementById('logArea');
            const div = document.createElement('div');
            div.textContent = fullMsg;
            logArea.appendChild(div);
            logArea.scrollTop = logArea.scrollHeight;
        }
        
        function clearLogs() {
            allMessages = [];
            document.getElementById('logArea').innerHTML = '<div>Logs cleared...</div>';
        }
        
        function copyLogs() {
            const text = allMessages.join('\n');
            if (navigator.clipboard) {
                navigator.clipboard.writeText(text).then(() => {
                    log('‚úÖ COPIED TO CLIPBOARD');
                });
            } else {
                // Simple fallback
                const textarea = document.createElement('textarea');
                textarea.value = text;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                log('‚úÖ COPIED (fallback)');
            }
        }
        
        async function startTest() {
            log('üîç Starting iPad Safari Debug Test...');
            log(`Browser: ${navigator.userAgent}`);
            log(`Screen: ${screen.width}x${screen.height}`);
            log(`Window: ${window.innerWidth}x${window.innerHeight}`);
            
            // Test local storage
            try {
                localStorage.setItem('test', 'ok');
                const test = localStorage.getItem('test');
                log(`‚úÖ localStorage: ${test}`);
                localStorage.removeItem('test');
            } catch (e) {
                log(`‚ùå localStorage: ${e.message}`);
            }
            
            // Test session storage  
            try {
                sessionStorage.setItem('test', 'ok');
                const test = sessionStorage.getItem('test');
                log(`‚úÖ sessionStorage: ${test}`);
                sessionStorage.removeItem('test');
            } catch (e) {
                log(`‚ùå sessionStorage: ${e.message}`);
            }
            
            log('üìä Basic tests complete');
            log('üí° Now try logging in to test auth flow...');
        }
        
        // Override console to capture everything
        const origLog = console.log;
        console.log = function(...args) {
            origLog.apply(console, args);
            log(args.join(' '));
        };
        
        const origError = console.error;
        console.error = function(...args) {
            origError.apply(console, args);
            log(`‚ùå ERROR: ${args.join(' ')}`);
        };
        
        const origWarn = console.warn;
        console.warn = function(...args) {
            origWarn.apply(console, args);
            log(`‚ö†Ô∏è WARN: ${args.join(' ')}`);
        };
        
        log('üîß Simple Debug Ready');
        log('üëÜ Tap START DEBUG TEST button');
    </script>
</body>
</html> 